### Vue双向绑定原理

​	Vue的双向绑定是采取**数据劫持**结合**发布者-订阅者**的设计模式来实现的, 通过`Object.defineProperty` 方法来劫持对象中各个属性的`getter`和`setter`方法,在数据发生变动时发布消息给订阅者,触发相应的回调.

​	实现双向绑定主要由4个类完成,其中Observer类对数据对象进行递归遍历,通过`Object.defineProperty`方法将数据对象中所有属性都进行劫持,如果数据有变动的话将会通知订阅者.

​	Compile类主要对每个DOM节点进行解析模板指令,将模板中的指令替换成数据,并将每个指令对应的节点绑定更新函数,添加监听数据的订阅者,一旦数据有变动,收到通知后,更新视图.

​	Watcher类作为订阅者,它是Observer和Compile的桥梁,等到属性变动时触发通知时,能调用自身的update回调方法,进而更新视图.

​	MVVM类为整合前三者的入口类,通过三者结合达到数据变化=>更新视图或视图变化=>数据变化的双向绑定效果 





Vue双向绑定主要是通过数据劫持与发布订阅者模式来实现的,通过defineProperty方法劫持数据对象属性的get,set方法,在数据发生变动时通过发布消息通知订阅者来进行触发事件的回调.

实现这套的机制主要依赖于4个类,Observer类主要通过defineProery对数据进行拦截,一旦数据有变化就通知订阅者.

Compile类主要用于解析指令,将指令替换为应该展示的数据,并且添加监到订阅者,一旦数据发生变动便更新视图.

Watcher类是Observer与Compile类的桥梁,等到数据变动时,他可以调用自己的回调函数进行视图更新.

MVVM类是整合以上三者的入口类,通过以上可以实现数据变动,视图随着更新.视图变化,数据也进行同步.