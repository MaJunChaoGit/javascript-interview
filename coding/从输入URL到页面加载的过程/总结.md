​	首先,当用户打开浏览器时,浏览器会创建多个进程来优化用户体验.其中有负责管理调度的浏览器主进程,负责第三方插件管理的第三方插件进程,负责3D渲染,GPU渲染的GPU进程,以及最重要的浏览器内核进程.

​	其中,当我们打开一个标签页时,就相当于开启了一个浏览器内核进程,该进程包含了负责页面创建,渲染的GUI线程;负责JS解析运行的JS引擎线程;负责事件调度,事件循环的事件管理线程;负责定时任务setTimeout,setInterval的定时任务线程;负责异步HTTP请求的网络线程.

​	当用户输入URL时,客户端会首先进行DNS解析,本机会查询自己的DNS缓存记录以及HOSTS文件等,如果没有缓存的话,会向ISP运营商提供的本地DNS解析服务器发送DNS查询请求,如果本地服务器有缓存记录直接返回,如果没有的话默认代替客户端进行递归查询,查询的顺序为根域名服务器,顶级域名服务器,二级域名服务器,权限域名服务器,直到查询到结果后,将IP返回交给客户机,此时客户机已知目标IP地址.

​	应用层通过系统调用传输层接口,拼接本机IP和随机端口以及目标机IP和目标端口套接字,进行与目标机的TCP/IP的三次握手,握手成功后开启socket通道listen.应用层将数据根据HTTP协议的规范进行封装,形成HTTP请求报文,并将数据传给传输层.

​	传输层接收到应用层数据后,将本机端口与目标机端口打包成标头,与上层数据组成TCP传输单位segement.通过TCP协议可以控制发送序列的产生,不断的调整发送序列,实现流量的控制以及数据的完整.传输层将把segement传给网络层.

​	网络层接收到传输层的数据后,将本机的IP与目标机的IP打包成标头,与上层数据组成IP层单位packet.网络层负责数据在网络中的传输,如果目标机与本机的IP在同一子网下将直接发送,否则将根据路由算法一直寻找下一跳的地址,直到找到最终目的地的地址,在找到目的地的地址后还会根据ARP协议获得目标机的MAC地址,并将MAC地址与packet一起传给数据链路层.

​	数据链路层获取到数据后,会根据以太网协议,将双方的MAC地址打包成标头,与上层数据组成数据链路层单位frame.以太网协议规定了数据包的数据部分最大只能为1500字节,所以如果网络层的数据过大的话需要进行拆分,并且每个包都需要包含IP标头.在数据链路层下,完成了相邻节点的数据传输.

​	物理层将数据链路层的数据以bit为单位从主机传输到下一跳的地址,下一跳接收到数据会从物理层到网络层进行从下而上的拆包,网络根据IP协议拆包后发现该数据不是自己的数据将会重新进行上述封包的过程,再经由物理层将数据进行发送.

​	如果此时接收方就是目的地的话,网络层对数据进行差错检验后会将数据交付给传输层,传输层此时已经开启了监听,此时会根据对应的端口信息将数据交付到应用层.

